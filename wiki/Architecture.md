# Architecture Overview

## System Architecture

LLMVisualizer 采用模块化设计，主要由以下组件构成：

```
┌─────────────────────────────────────────────────────────┐
│                    Streamlit UI Layer                     │
│                   (app.py - 主界面)                       │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│                   Visualization Layer                     │
│                  (visualizer.py - 可视化)                 │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐     │
│  │  Attention   │ │ Token Flow   │ │  Semantic    │     │
│  │  Visualizer  │ │ Visualizer   │ │  Clustering  │     │
│  └──────────────┘ └──────────────┘ └──────────────┘     │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│                   Model Loading Layer                     │
│                 (gpt2_loader.py - 模型)                   │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐     │
│  │ GPT-2 Small  │ │ GPT-2 Medium │ │   Quantized  │     │
│  │   (124M)     │ │   (350M)     │ │    Models    │     │
│  └──────────────┘ └──────────────┘ └──────────────┘     │
└─────────────────────────────────────────────────────────┘
```

## Core Components

### app.py (主界面)
- Streamlit Web 应用入口
- 用户交互界面设计
- 参数控制与状态管理
- 可视化结果展示

### visualizer.py (可视化模块)
- `visualize_attention()` - 注意力权重热力图
- `visualize_token_flow()` - Token 推理时序流
- `visualize_semantic_clustering()` - 语义聚类散点图

### gpt2_loader.py (模型加载)
- 模型初始化与加载
- 文本生成接口
- 内部状态提取（注意力、隐藏状态）
